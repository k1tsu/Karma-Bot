test_array = "[<Member user=<User username=kitsu id=196412773062803460 discriminator=8495> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-10-12 10:55:08 +0000 roles=[<Role name=Skyrim permissions=#<Discordrb::Permissions:0x00007fa6aa2f6108 @writer=<RoleWriter role=#<Discordrb::Role:0x00007fa6aa2f61a8> token=...>, @bits=104324161, @create_instant_invite=true, @kick_members=false, @ban_members=false, @administrator=false, @manage_channels=false, @manage_server=false, @add_reactions=true, @view_audit_log=false, @priority_speaker=false, @read_messages=true, @send_messages=true, @send_tts_messages=true, @manage_messages=false, @embed_links=true, @attach_files=true, @read_message_history=true, @mention_everyone=true, @use_external_emoji=true, @connect=true, @speak=true, @mute_members=false, @deafen_members=false, @move_members=false, @use_voice_activity=true, @change_nickname=true, @manage_nicknames=false, @manage_roles=false, @manage_webhooks=false, @manage_emojis=false> hoist=false colour=#<Discordrb::ColourRGB:0x00007fa6aa2f52a8 @combined=3447003, @red=52, @green=152, @blue=219> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300>>] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<User username=Black Festive Obama id=288587192639422466 discriminator=6963> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-12-18 00:34:09 +0000 roles=[<Role name=Skyrim permissions=#<Discordrb::Permissions:0x00007fa6aa2f6108 @writer=<RoleWriter role=#<Discordrb::Role:0x00007fa6aa2f61a8> token=...>, @bits=104324161, @create_instant_invite=true, @kick_members=false, @ban_members=false, @administrator=false, @manage_channels=false, @manage_server=false, @add_reactions=true, @view_audit_log=false, @priority_speaker=false, @read_messages=true, @send_messages=true, @send_tts_messages=true, @manage_messages=false, @embed_links=true, @attach_files=true, @read_message_history=true, @mention_everyone=true, @use_external_emoji=true,@connect=true, @speak=true, @mute_members=false, @deafen_members=false, @move_members=false, @use_voice_activity=true, @change_nickname=true, @manage_nicknames=false, @manage_roles=false, @manage_webhooks=false, @manage_emojis=false> hoist=false colour=#<Discordrb::ColourRGB:0x00007fa6aa2f52a8 @combined=3447003, @red=52, @green=152, @blue=219> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300>>] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<User username=ASGS id=500260218723237909 discriminator=6279> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-10-12 11:00:33 +0000 roles=[<Role name=A Simple Google Searchpermissions=#<Discordrb::Permissions:0x00007fa6a9291ec0 @writer=<RoleWriter role=#<Discordrb::Role:0x00007fa6a9291f38> token=...>, @bits=15368, @create_instant_invite=false,@kick_members=false, @ban_members=false, @administrator=true, @manage_channels=false, @manage_server=false, @add_reactions=false, @view_audit_log=false, @priority_speaker=false, @read_messages=true, @send_messages=true, @send_tts_messages=true, @manage_messages=true, @embed_links=false, @attach_files=false, @read_message_history=false, @mention_everyone=false, @use_external_emoji=false, @connect=false,@speak=false, @mute_members=false, @deafen_members=false,@move_members=false, @use_voice_activity=false, @change_nickname=false, @manage_nicknames=false, @manage_roles=false, @manage_webhooks=false, @manage_emojis=false> hoist=false colour=#<Discordrb::ColourRGB:0x00007fa6a9291510 @combined=0, @red=0, @green=0, @blue=0> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300>>] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<User username=StatBot id=501990110254989323 discriminator=5198> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-10-17 05:37:00 +0000 roles=[<Role name=StatBot permissions=#<Discordrb::Permissions:0x00007fa6a9291498 @writer=<RoleWriter role=#<Discordrb::Role:0x00007fa6a92914e8> token=...>, @bits=262216, @create_instant_invite=false, @kick_members=false, @ban_members=false, @administrator=true, @manage_channels=false, @manage_server=false, @add_reactions=true, @view_audit_log=false, @priority_speaker=false, @read_messages=false, @send_messages=false, @send_tts_messages=false, @manage_messages=false, @embed_links=false, @attach_files=false, @read_message_history=false, @mention_everyone=false, @use_external_emoji=true, @connect=false, @speak=false, @mute_members=false, @deafen_members=false, @move_members=false, @use_voice_activity=false, @change_nickname=false, @manage_nicknames=false, @manage_roles=false, @manage_webhooks=false, @manage_emojis=false> hoist=false colour=#<Discordrb::ColourRGB:0x00007fa6a9290ae8 @combined=0, @red=0, @green=0, @blue=0> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300>>] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<User username=You'reTheWinnerBOT id=502384768814415873 discriminator=5066> server=<Servername=Bot Server id=500260125538385920 large=false region=owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-10-18 07:45:04 +0000 roles=[] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<Userusername=MyCoolBot id=524024003623387157 discriminator=8201> server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-12-17 00:50:21 +0000 roles=[<Role name=MyCoolBot permissions=#<Discordrb::Permissions:0x00007fa6a9290a48 @writer=<RoleWriter role=#<Discordrb::Role:0x00007fa6a9290ac0> token=...>, @bits=262216, @create_instant_invite=false, @kick_members=false, @ban_members=false, @administrator=true, @manage_channels=false, @manage_server=false, @add_reactions=true, @view_audit_log=false, @priority_speaker=false, @read_messages=false, @send_messages=false, @send_tts_messages=false, @manage_messages=false, @embed_links=false, @attach_files=false, @read_message_history=false, @mention_everyone=false, @use_external_emoji=true, @connect=false, @speak=false, @mute_members=false, @deafen_members=false, @move_members=false, @use_voice_activity=false, @change_nickname=false, @manage_nicknames=false, @manage_roles=false, @manage_webhooks=false, @manage_emojis=false> hoist=false colour=#<Discordrb::ColourRGB:0x00007fa6aa2f7eb8 @combined=0, @red=0, @green=0, @blue=0>server=<Server name=Bot Server id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300>>] voice_channel=nil mute= deaf= self_mute= self_deaf=>, <Member user=<User username=Skyrim Bot id=525124313939181598 discriminator=1013> server=<Server name=BotServer id=500260125538385920 large=false region= owner=#<Discordrb::User:0x00007fa6aa2f51e0> afk_channel_id= system_channel_id=500260125538385922 afk_timeout=300> joined_at=2018-12-20 01:39:43 +0000 roles=[] voice_channel=nil mute=deaf= self_mute= self_deaf=>]"








def user_array(array)
  user_list = []
  array.each do |element|
    split_array = element.split(" ")
    split_array.each do |element|
      if element.include? "username"
        username = element.split("=")
        user_list << username[1]
      end
    end
    return user_list
  end
end


puts user_array(test_array)

def user_default(user_array)
end
def karma_update(user_array)

end
Â©

def user_array(array)
  user_list = []
  array.each do |element|
    split_array = element.split(" ")
    split_array.each do |element|
      if element.include? "username"
        username = element.split("=")
        user_list << username[1]
      end
    end
    return user_list
  end
end

puts user_array()

def user_default(user_array)
  default = []
  usernames = user_array(user_array)
  usernames.each do |user|
    default_string = "#{user}:0"
    default << default_string
  end
end

def write_user_default(user_array)
  File.open("karma_user.txt") {|f| f.puts user_array.join("\n")}
end

def get_karma(username)
  lines = array_chomp(File.readlines("karma_user.txt"))
  lines.each do |user|
    user_ = user.split(":")[0]
    karma = user.split(":")[1]
    index = lines.index(user)
    if user_ == username
      return user_,karma.to_i,index
    end
  end
end

def change_karma(username,new_karma)
  attributes = get_karma(username)
  lines = File.readlines(KARMA_DIR)
  lines[attributes[2]] = "#{username}:#{new_karma}\n"
  File.open(KARMA_DIR,'w') {|file| file.write(lines.join)}
end

def plus_karma(username)
  attributes = get_karma(username)
  change_karma(username,attributes[1] + 1)
end


def karma_update(user_array)
end
